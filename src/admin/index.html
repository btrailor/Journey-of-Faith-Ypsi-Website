<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Content Manager</title>
  </head>
  <body>
    <!-- Loading message -->
    <div
      id="loading"
      style="text-align: center; padding: 50px; font-family: Arial, sans-serif"
    >
      <h2>Loading Content Manager...</h2>
      <p>Please wait while the admin interface loads.</p>
    </div>

    <!-- Include the script that builds the page and powers Decap CMS -->
    <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>

    <script>
      console.log("Admin page loaded, checking for CMS...");

      // Wait for CMS to load
      function initCMS() {
        if (window.CMS) {
          console.log("CMS loaded successfully!");
          document.getElementById("loading").style.display = "none";

          window.CMS.registerEventListener({
            name: "prePublish",
            handler: ({ author, entry }) => {
              console.log("Publishing:", entry);
            },
          });
        } else {
          console.log("CMS not ready yet, retrying...");
          setTimeout(initCMS, 100);
        }
      }

      // Start checking for CMS after a short delay
      setTimeout(initCMS, 500);
    </script>
  </body>
</html>
